module.exports = (client, threadSet) => {

  client.on("messageCreate", (message) => {
    if (!message.author.bot && threadSet.some(e => e.id === message.channel.id)){
      let i = threadSet.findIndex(e => e.id === message.channel.id)
      console.log(threadSet[i].rep)
      // console.log(message.content)


      switch (threadSet[i].progress) {
        case 1 :
          if (message.content.match(/[^0-9]/g)){
            message.reply({
              content : `Je comprends rien √† tout ce charabia, utilise des chiffres, c'est mieux l'ami.` 
            })
          }  else if (message.content > 75){
            message.reply({ content : `Qu'est-ce qu'on avait dit √† propos de la triche, esp√®ce de fond de cale ? Dis-nous la v√©rit√©, ou tu ne monte pas √† bord !`, allowedMentions: {repliedUser: false}})
          } else {

            let reaperLvl = {
              'reaper' : message.content 
            }
            threadSet[i].progress += 1
            threadSet[i].rep.reaper = message.content
            
            if (message.content == 75 ) {
              message.reply({ content : `Eh ben, je vois qu'on a un champion de la flamme dans nos rangs !\n\nMais qu'en est-il de ton niveau de Collectionneur d'Or ü§ë ? `, allowedMentions: {repliedUser: false}})
              
            } else if (message.content > 50) {
              message.reply({ content : `Aaaah √ßa c'est ce qu'on veut entendre !\n\nMais qu'en est-il de ton niveau de Collectionneur d'Or ü§ë ?`, allowedMentions: {repliedUser: false}})
            } else if (message.content > 25) {
              message.reply({ content : `C'est pas mal du tout l'ami!\n\nMais qu'en est-il de ton niveau de Collectionneur d'Or ü§ë ?`, allowedMentions: {repliedUser: false}})
            } else if (message.content > 10) {
              message.reply({ content : `Disons que c'est un bon d√©but pour une vie de piraterie, mais ton nom ne figurera pas dans le Code des Pirates !\n\n√Ä pr√©sent, qu'en est-il de ton niveau de Collectionneur d'Or ü§ë ?`, allowedMentions: {repliedUser: false}})
            } else if (message.content > 0) {
              message.reply({ content : `Alors comme √ßa on s'est r√©cemment lanc√© dans la piraterie pure et dure, c'est √ßa ? Tu vas te plaire ici.\n\nQu'en est-il de ton niveau de Collectionneur d'Or ü§ë ?`, allowedMentions: {repliedUser: false}})
            } else {
              message.reply({ content : `C'est not√©, mais il va falloir travailler √ßa camarade, les mers ne sont pas de tout repos !\n\nQu'en est-il de ton niveau de Collectionneur d'Or ü§ë ?`, allowedMentions: {repliedUser: false}})
            }
          }
          break
        case 2 :
          if (message.content.match(/[^0-9]/g)){
            message.reply({
              content : `Je comprends rien √† tout ce charabia, utilise des chiffres, c'est mieux l'ami.` 
            })
          }  else if (message.content > 75){
            message.reply({ content : `Qu'est-ce qu'on avait dit √† propos de la triche, esp√®ce de fond de cale ? Dis-nous la v√©rit√©, ou tu ne monte pas √† bord !`, allowedMentions: {repliedUser: false}})
          } else {

            
            threadSet[i].progress += 1
            threadSet[i].rep.gold = message.content

            
            if (message.content == 75 ) {
              message.reply({ content : `Oh, je vois qu'on a √† faire √† un v√©ritable collectionneur d'or chatoyant !\n\nConcernant l'Ordre des √Çmes üíÄ, quel est ton niveau, cette fois-ci ?`, allowedMentions: {repliedUser: false}})
              
            } else if (message.content > 50) {
              message.reply({ content : `Je vois que la fortune coule √† flots !\n\nMais qu'en est-il de ton niveau aupr√®s de l'Ordre des √Çmes üíÄ ?`, allowedMentions: {repliedUser: false}})
            } else if (message.content > 25) {
              message.reply({ content : `Tr√®s int√©ressant tout √ßa !\n\nMais qu'en est-il de ton niveau aupr√®s de l'Ordre des √Çmes üíÄ ?`, allowedMentions: {repliedUser: false}})
            } else if (message.content > 10) {
              message.reply({ content : `Un tr√®s bon d√©part pour la vie de pirate plein aux as !\n\nMais qu'en est-il de ton niveau aupr√®s de l'Ordre des √Çmes üíÄ ?`, allowedMentions: {repliedUser: false}})
            } else if (message.content > 0) {
              message.reply({ content : `Ahlala, on est encore loin de la fortune √† ce que je vois.\n\nM'enfin, qu'en est-il de ton niveau aupr√®s de l'Ordre des √Çmes üíÄ ?`, allowedMentions: {repliedUser: false}})
            } else {
              message.reply({ content : `... Comme on dit, on trouve de tout en haute mer.\n\nM'enfin, qu'en est-il de ton niveau aupr√®s de l'Ordre des √Çmes üíÄ ?`, allowedMentions: {repliedUser: false}})
            }
          }
          break
        case 3 :
          if (message.content.match(/[^0-9]/g)){
            message.reply({
              content : `Je comprends rien √† tout ce charabia, utilise des chiffres, c'est mieux l'ami.` 
            })
          }  else if (message.content > 75){
            message.reply({ content : `Qu'est-ce qu'on avait dit √† propos de la triche, esp√®ce de fond de cale ? Dis-nous la v√©rit√©, ou tu ne monte pas √† bord !`, allowedMentions: {repliedUser: false}})
          } else {

            
            threadSet[i].progress += 1
            threadSet[i].rep.souls = message.content

            
            if (message.content == 75 ) {
              message.reply({ content : `Woah ! Les Mages de l'Orde se font rares de ces jours-ci !\n\nEt ton niveau des Marchands üêî, √ßa dit quoi ? `, allowedMentions: {repliedUser: false}})
              
            } else if (message.content > 50) {
              message.reply({ content : `√áa doit faire beaucoup de cranes rapport√©s aux avant-postes, tout √ßa !\n\n Et ton niveau des Marchands üêî, √ßa dit quoi ?`, allowedMentions: {repliedUser: false}})
            } else if (message.content > 25) {
              message.reply({ content : `Il faut tuer combien d'√©quipages squelettes pour devenir un Capitaine Mystique d√©j√† ?\n\nEnfin bref, et ton niveau des Marchands üêî, √ßa dit quoi ?`, allowedMentions: {repliedUser: false}})
            } else if (message.content > 10) {
              message.reply({ content : `C'est qu'on a pas peur des √©quipages squelettes alors ? C'est excellent !\n\nEt ton niveau des Marchands üêî, √ßa dit quoi ?`, allowedMentions: {repliedUser: false}})
            } else if (message.content > 0) {
              message.reply({ content : `Tiens, un nouveau pirate qui se lance dans la chasse aux squelettes ? Bon courage, camarade ! \n\nEt ton niveau des Marchands üêî, √ßa dit quoi ?`, allowedMentions: {repliedUser: false}})
            } else {
              message.reply({ content : `Aaah, je comprends. J'ai moi-m√™me du mal √† terrasser ces squelettes, ils sont si... mena√ßants!\n\n Et ton niveau des Marchands üêî, √ßa dit quoi ?`, allowedMentions: {repliedUser: false}})
            }
          }
          break
        case 4 :
          if (message.content.match(/[^0-9]/g)){
            message.reply({
              content : `Je comprends rien √† tout ce charabia, utilise des chiffres, c'est mieux l'ami.` 
            })
          }  else if (message.content > 75){
            message.reply({ content : `Qu'est-ce qu'on avait dit √† propos de la triche, esp√®ce de fond de cale ? Dis-nous la v√©rit√©, ou tu ne monte pas √† bord !`, allowedMentions: {repliedUser: false}})
          } else {

            
            threadSet[i].progress += 1
            threadSet[i].rep.merch = message.content

            
            if (message.content == 75 ) {
              message.reply({ content : `Un Marchand √âminent ? Toutes mes salutations, ¬´ Votre Honneur ¬ª !\n\nCela-dit, o√π te trouves-tu sur les √©chelons de la Fortune d'Ath√©na üëª ?`, allowedMentions: {repliedUser: false}})
              
            } else if (message.content > 50) {
              message.reply({ content : `Eh ben ! C'est presque √† en faire redouter la Grande Union Maritime !\n\nCela-dit, o√π te trouves-tu sur les √©chelons de la Fortune d'Ath√©na üëª ?`, allowedMentions: {repliedUser: false}})
            } else if (message.content > 25) {
              message.reply({ content : `C'est qu'on aime bien vendre des cochons et des poules √† ce que je vois !\n\nCela-dit, o√π te trouves-tu sur les √©chelons de la Fortune d'Ath√©na üëª ?`, allowedMentions: {repliedUser: false}})
            } else if (message.content > 10) {
              message.reply({ content : `J'en connais quelques-uns qui ont du √™tre content d'avoir leurs livraisons √† temps moi !\n\nCela-dit, o√π te trouves-tu sur les √©chelons de la Fortune d'Ath√©na üëª ?`, allowedMentions: {repliedUser: false}})
            } else if (message.content > 0) {
              message.reply({ content : `C'est pas mal du tout... pour un marin d'eau douce !\n\nCela-dit, o√π te trouves-tu sur les √©chelons de la Fortune d'Ath√©na üëª ?`, allowedMentions: {repliedUser: false}})
            } else {
              message.reply({ content : `Honn√™tement, √ßa se comprend : transporter du cargo, c'est assez dangereux dans ces mers tumultueuses !\n\nCela-dit, o√π te trouves-tu sur les √©chelons de la Fortune d'Ath√©na üëª ?`, allowedMentions: {repliedUser: false}})
            }
          }
          break
        case 5 :
          if (message.content.match(/[^0-9]/g)){
            message.reply({
              content : `Je comprends rien √† tout ce charabia, utilise des chiffres, c'est mieux l'ami.` 
            })
          }  else if (message.content > 20){
            message.reply({ content : `Qu'est-ce qu'on avait dit √† propos de la triche, esp√®ce de fond de cale ? Dis-nous la v√©rit√©, ou tu ne monte pas √† bord !`, allowedMentions: {repliedUser: false}})
          } else {

            
            threadSet[i].progress += 1
            threadSet[i].rep.athena = message.content

            
            if (message.content == 20 ) {
              message.reply({ content : `Woah, un champion de la Fortune d'Ath√©na, dans nos rangs ? Tu pourrais presque avoir la cabine du capitaine !\n\nL'Ar√®ne, √† pr√©sent, √† quel niveau s'√©l√®ve ton rang de Loup de Mer ‚öîÔ∏è, hein ?`, allowedMentions: {repliedUser: false}})
            } else if (message.content > 10) {
              message.reply({ content : `Eh bien, je vois que tu n'as pas chaum√©, c'est tr√®s impressionnant !\n\nL'Ar√®ne, √† pr√©sent, √† quel niveau s'√©l√®ve ton rang de Loup de Mer ‚öîÔ∏è, hein ?`, allowedMentions: {repliedUser: false}})
            } else if (message.content > 0) {
              message.reply({ content : `On s'y est r√©cemment lanc√© √† ce que je vois ? J'en prends note pour nos futures aventures !\n\nL'Ar√®ne, √† pr√©sent, √† quel niveau s'√©l√®ve ton rang de Loup de Mer ‚öîÔ∏è, hein ?`, allowedMentions: {repliedUser: false}})
            } else {
              message.reply({ content : `Ah.. l'Ath√©na n'est r√©serv√© qu'aux plus forts et aux plus t√©m√©raires d'entre nous. Mais tout n'est pas encore jou√© l'ami !\n\nL'Ar√®ne, √† pr√©sent, √† quel niveau s'√©l√®ve ton rang de Loup de Mer ‚öîÔ∏è, hein ?`, allowedMentions: {repliedUser: false}})
            }
          }
          break
        case 6 :
          if (message.content.match(/[^0-9]/g)){
            message.reply({
              content : `Je comprends rien √† tout ce charabia, utilise des chiffres, c'est mieux l'ami.` 
            })
          }  else if (message.content > 50){
            message.reply({ content : `Qu'est-ce qu'on avait dit √† propos de la triche, esp√®ce de fond de cale ? Dis-nous la v√©rit√©, ou tu ne monte pas √† bord !`, allowedMentions: {repliedUser: false}})
          } else {

            
            threadSet[i].progress += 1
            threadSet[i].rep.arena = message.content

            
            if (message.content == 50 ) {
              message.reply({ content : `Un Ma√Ætre de l'Ar√®ne ? C'est absolument incroyable, toutes mes f√©licitations !\n\nIl me reste un truc sur ma liste, c'est le fameux Appel du Chasseur üé£, tu en es √† quel niveau exactement ?`, allowedMentions: {repliedUser: false}})
              
            } else if (message.content > 25) {
              message.reply({ content : `Je vois qu'on se fraie une place parmis les plus talentueux de l'ar√®ne hein ? je te souhaites bien du courage !\n\nEt enfin, l'Appel du Chasseur üé£, tu en es √† quel niveau exactement ?`, allowedMentions: {repliedUser: false}})
            } else if (message.content > 10) {
              message.reply({ content : `Eh ben ! On te r√©servera les cannons l'ami !\n\nEt enfin, l'Appel du Chasseur üé£, tu en es √† quel niveau exactement ?`, allowedMentions: {repliedUser: false}})
            } else if (message.content > 0) {
              message.reply({ content : `\n\nEt enfin, l'Appel du Chasseur üé£, tu en es √† quel niveau exactement ?`, allowedMentions: {repliedUser: false}})
            } else {
              message.reply({ content : `Ce n'est pas grave camarade, ressaisis-toi ! Tout marin a sa place sur les mers, et la tienne sera dans le nid de pie !\n\nEt enfin, l'Appel du Chasseur üé£, tu en es √† quel niveau exactement ?`, allowedMentions: {repliedUser: false}})
            }
          }
          break
        case 7 :
          if (message.content.match(/[^0-9]/g)){
            message.reply({
              content : `Je comprends rien √† tout ce charabia, utilise des chiffres, c'est mieux l'ami.`, allowedMentions: {repliedUser: false}
            })
          }  else if (message.content > 50){
            message.reply({ content : `Qu'est-ce qu'on avait dit √† propos de la triche, esp√®ce de fond de cale ? Dis-nous la v√©rit√©, ou tu ne monte pas √† bord !`, allowedMentions: {repliedUser: false}})
          } else {

            
            threadSet[i].progress += 1
            threadSet[i].rep.fish = message.content

            
            if (message.content == 50 ) {
              message.reply({ content : `Un Chasseur Aguerri, bah √ßa alors ! `, allowedMentions: {repliedUser: false}})

            } else if (message.content > 10) {
              message.reply({ content : `Ha ! Fais bien gaffe de pas finir comme ce bon vieux Merrick √† courir apr√®s les pr√©dateurs des mers, il y a laiss√© ses deux jambes le bougre !`, allowedMentions: {repliedUser: false}})

            } else if (message.content > 10) {
              message.reply({ content : `Ha ! Fais bien gaffe de pas finir comme ce bon vieux Merrick √† courir apr√®s les pr√©dateurs des mers, il y a laiss√© ses deux jambes le bougre !`, allowedMentions: {repliedUser: false}})
            } else if (message.content > 0) {
              message.reply({ content : `On commence √† s'attaquer aux plus gros poissons hein ? Tu vas voir, plus c'est dangereux, plus int√©resante la r√©compense sera.`, allowedMentions: {repliedUser: false}})
            } else {
              message.reply({ content : `Ce n'est pas grave, j'te rassure, on a tous fait bruler nos poissons. Mais √ßa ira mieux avec le temps... on esp√®re du moins !`, allowedMentions: {repliedUser: false}})
            }

            setTimeout(function(){
            message.reply({content :`Voil√† matelot, ton pseudo a bel et bien √©t√© modifi√© !\n\n
            Os de la faucheuse ‚Äî ${threadSet[i].rep.reaper}\n
            Collectioneurs d'Or‚Äî ${threadSet[i].rep.gold}\n
            Ordre des √Çmes ‚Äî ${threadSet[i].rep.souls}\n
            Marchands ‚Äî ${threadSet[i].rep.merch}\n
            Fortune d'Ath√©na ‚Äî ${threadSet[i].rep.athena}\n
            Les Loups de Mer ‚Äî ${threadSet[i].rep.arena}\n
            l'Appel du Chasseur ‚Äî ${threadSet[i].rep.fish}\n`, 
            allowedMentions: {repliedUser: false}})}, 500)

            setTimeout(function(){
              message.guild.channels.cache.find(chan => chan.id == message.channel.id).delete()
              threadSet[i].splice(0,1)
              console.log(threadSet)
            }, 11000)

              // let user = message.guild.members.cache.find(e => e.id === message.author.id)
              // user.setNickname(`${message.author.username} | test`)
              // user.setNickname(`${message.author.username} | üî•${rep.reaper} ü§ë${rep.gold} üíÄ${rep.souls} üêî${rep.merch} üëª${rep.athena} ‚öîÔ∏è${rep.arena} üé£${rep.fish}`)
            // } 
            // setNick()
          }
          break
      }
    }
  })
}